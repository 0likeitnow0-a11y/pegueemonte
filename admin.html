<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Pegue e Monte</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial; background: #f5f5f5; padding: 20px; }
        .container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        h1 { color: #8B7355; text-align: center; margin-bottom: 20px; }
        .url-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            font-family: monospace;
            font-size: 0.9rem;
            word-break: break-all;
        }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }
        button {
            background: #8B7355;
            color: white;
            border: none;
            padding: 15px;
            width: 100%;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 10px;
        }
        .success { 
            background: #d4edda; 
            color: #155724; 
            padding: 15px; 
            border-radius: 5px; 
            margin: 20px 0;
            display: none;
        }
        .products-list { margin-top: 30px; }
        .product-item {
            background: #f9f9f9;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #8B7355;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚öôÔ∏è Admin - Pegue e Monte</h1>
        
        <div class="url-info">
            <strong>‚úÖ Gist Atual:</strong><br>
            <span id="currentUrl">https://gist.githubusercontent.com/0likeitnow0-a11y/6fc7b3062eff79a4be89bf3ff74b0e84/raw/18d0baf6bef15a2ae0d66d86db9ec87c1de27383/produtos.json</span>
        </div>
        
        <div class="success" id="successMsg">
            ‚úÖ Produto adicionado √† lista!
        </div>
        
        <h2>‚ûï Adicionar Produto</h2>
        <form id="productForm">
            <div class="form-group">
                <label>Nome do Produto *</label>
                <input type="text" id="nome" required>
            </div>
            
            <div class="form-group">
                <label>Pre√ßo por dia (R$) *</label>
                <input type="number" id="preco" step="0.01" required>
            </div>
            
            <div class="form-group">
                <label>Descri√ß√£o *</label>
                <textarea id="descricao" rows="3" required></textarea>
            </div>
            
            <div class="form-group">
                <label>URL da Foto *</label>
                <input type="url" id="foto" required>
                <small style="color: #666;">Use <a href="https://imgur.com" target="_blank">Imgur.com</a></small>
            </div>
            
            <div class="form-group">
                <label>Tamanho *</label>
                <input type="text" id="tamanho" required>
            </div>
            
            <button type="submit">üíæ Salvar Produto</button>
        </form>
        
        <div class="products-list">
            <h2>üìã Produtos na Lista</h2>
            <div id="productsList">
                <!-- Produtos aparecem aqui -->
            </div>
            
            <div style="margin-top: 20px;">
                <button onclick="showJSON()" style="background: #2196F3;">
                    üìã Mostrar JSON
                </button>
                <button onclick="copyJSON()" style="background: #4CAF50; margin-top: 10px;">
                    üìã Copiar JSON
                </button>
                <button onclick="clearAll()" style="background: #f44336; margin-top: 10px;">
                    üóëÔ∏è Limpar Tudo
                </button>
            </div>
        </div>
        
        <div id="jsonOutput" style="
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 12px;
            white-space: pre-wrap;
            display: none;
        "></div>
        
        <div style="text-align: center; margin-top: 30px;">
            <a href="index.html" style="color: #8B7355; font-weight: bold;">üëÄ Ver Site</a>
            <br>
            <a href="https://gist.githubusercontent.com/0likeitnow0-a11y/6fc7b3062eff79a4be89bf3ff74b0e84/raw/18d0baf6bef15a2ae0d66d86db9ec87c1de27383/produtos.json" 
               target="_blank" style="color: #2196F3; font-size: 0.9rem;">
                üì¶ Ver Gist Atual
            </a>
        </div>
    </div>

    <script>
        // URL DO SEU NOVO GIST
        const GIST_URL = "https://gist.githubusercontent.com/0likeitnow0-a11y/6fc7b3062eff79a4be89bf3ff74b0e84/raw/18d0baf6bef15a2ae0d66d86db9ec87c1de27383/produtos.json";
        
        let produtos = [];
        
        function loadProducts() {
            const saved = localStorage.getItem('pegueemonte_admin');
            produtos = saved ? JSON.parse(saved) : [];
            displayProducts();
        }
        
        function displayProducts() {
            const container = document.getElementById('productsList');
            
            if (produtos.length === 0) {
                container.innerHTML = '<p>Nenhum produto na lista.</p>';
                return;
            }
            
            let html = '';
            produtos.forEach((prod, index) => {
                html += `
                    <div class="product-item">
                        <strong>${prod.nome}</strong> - R$ ${prod.preco}/dia
                        <br><small>${prod.descricao}</small>
                        <br><small><strong>Tamanho:</strong> ${prod.tamanho}</small>
                        <button onclick="removeProduct(${index})" style="
                            background: #f44336;
                            color: white;
                            border: none;
                            padding: 5px 10px;
                            border-radius: 3px;
                            float: right;
                            cursor: pointer;
                            margin-top: 5px;
                        ">
                            Remover
                        </button>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            updateJSON();
        }
        
        function updateJSON() {
            const jsonData = {
                produtos: produtos
            };
            document.getElementById('jsonOutput').textContent = JSON.stringify(jsonData, null, 2);
        }
        
        // FORMUL√ÅRIO
        document.getElementById('productForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const novoProduto = {
                id: Date.now(),
                nome: document.getElementById('nome').value.trim(),
                preco: parseFloat(document.getElementById('preco').value),
                descricao: document.getElementById('descricao').value.trim(),
                foto: document.getElementById('foto').value.trim(),
                tamanho: document.getElementById('tamanho').value.trim()
            };
            
            produtos.push(novoProduto);
            localStorage.setItem('pegueemonte_admin', JSON.stringify(produtos));
            
            document.getElementById('successMsg').style.display = 'block';
            setTimeout(() => {
                document.getElementById('successMsg').style.display = 'none';
            }, 3000);
            
            this.reset();
            displayProducts();
        });
        
        function removeProduct(index) {
            if (confirm('Remover este produto?')) {
                produtos.splice(index, 1);
                localStorage.setItem('pegueemonte_admin', JSON.stringify(produtos));
                displayProducts();
            }
        }
        
        function showJSON() {
            document.getElementById('jsonOutput').style.display = 'block';
        }
        
        async function copyJSON() {
            const jsonText = document.getElementById('jsonOutput').textContent;
            
            try {
                await navigator.clipboard.writeText(jsonText);
                alert('‚úÖ JSON copiado! Agora cole no seu Gist.');
            } catch (err) {
                // Fallback para mobile
                const textarea = document.createElement('textarea');
                textarea.value = jsonText;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('‚úÖ JSON copiado!');
            }
        }
        
        function clearAll() {
            if (confirm('Limpar TODOS os produtos?')) {
                produtos = [];
                localStorage.removeItem('pegueemonte_admin');
                displayProducts();
                alert('üóëÔ∏è Todos os produtos removidos!');
            }
        }
        
        // INICIALIZA√á√ÉO
        document.addEventListener('DOMContentLoaded', function() {
            loadProducts();
            document.getElementById('currentUrl').textContent = GIST_URL;
            console.log('‚úÖ Admin carregado com Gist:', GIST_URL);
        });
    </script>
</body>
</html>